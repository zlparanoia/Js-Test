### 5-30:

实现一个分类列表：
效果图：
![github](https://github.com/zlparanoia/Js-Test/blob/master/menu/img/display.png)
 

功能：
1、分类支持多层级别。    
2、分类支持增加分类、删除分类两个操作。     
      1.在左侧分类下方有添加操作，点击后弹出浮层让输入新分类的名称，新分类将会添加到当前选中的分类下。   
      2.当鼠标hover过某个分类时，右侧会出现删除按钮，点击后，弹出确认是否删除的对话框，确认后删除掉该分类。   
      3.不能为默认分类添加子分类，也不能删除默认分类。    
3. 每个文件夹点击可收放。    
4. 每个文件夹和文件点击显示背景色，表示鼠标当前所在的地方。    

遇到的问题：
bug1: i、len重复定义。js没有块级作用域。
bug2: 把收放的click绑在li上面，由于li包含子元素ul，点击子元素ul也会执行收放。应该绑在a
      上，再判断a的下一个元素是不是ul来判断有没有子列表。
bug3: for循环的length使用先前定义的，长度改变之后变量没变导致空值。
      每使用for的length重新定义，以免混乱。
bug4：在把name赋给a的innerHTML之前添加子元素，会把子元素覆盖掉。应该在执行innerHTML之后添加。
bug5: 鼠标放在元素上时img会闪烁。因为：mouseout鼠标位于一个元素的上方，然后用户将其移入另一个元素时触发，这个
      元素可能是它的子元素，所以当鼠标放在元素上时img即显示又隐藏，因此会闪烁。
bug6: 同时给元素和document添加点击事件，元素会冒泡到document元素，执行document的事件函数，覆盖掉元素的事件函数。
bug7: 鼠标左键event.button == 0。右键：2，中间键1。

注意的问题：
      1、将每一个功能都封装到函数里。
      2、当需要遍历添加多个事件时使用事件委托，提高性能。
      3、通常是公共对象放前面，接着是函数，再接着事件。

总结：
      虽然只是一个小功能，代码就有170多行。遇到了很多细节上的问题，比如说一个很小的知识点，之前看书时只是大概浏览，没有太深的印象，直到做题时用上了才知道它具体的用法，或者是和其他相近功能的不同点。比如说事件冒泡机制，之前只是大概知道事件冒泡就是文档中嵌套层次最深的那个节点，也就是最具体的节点接收，然后逐级向上传播不具体的节点。当做题时用到具体元素和文档元素都定义了点击事件，却没有想到事件冒泡后文档元素会把具体元素的事件覆盖掉。所以我觉得当我们看书时，应该边看边练，熟悉它的具体用法，而不是浏览知道大概的意思就可以了，那样的话当真正用到时就不会想到它的影响。区别相近功能事件的用法也很重要，比如说mouseout和mouseleave都是鼠标离开元素时触发，而他们的不同点是首先mouseout会冒泡，而mouseleave不会。mouseout是移动到另一个元素时触发，而这个元素也可能是子元素，因此当同时使用mouseover和mouseout时通常子元素都会出现闪烁现象。而mouseleave移动到另一个元素时才会触发，移动到后代元素不会触发。所以当需要移动到后代元素也不触发的功能时使用mouseleave才会有更好的用户体验。 
